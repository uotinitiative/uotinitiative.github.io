!function(){var t="G-EKZHGCZVQT",e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id="+t,document.head.appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",t)}();const CONFIG={languages:{}};let catalogReady=!1,catalogLoadPromise=null;const DETAIL_PAGE_MAP={english_10_science:"science-age-10-grade-5",english_11_math:"math-age-11-grade-6",english_12_math:"math-age-12-grade-7",english_13_prealgebra:"prealgebra-age-13-grade-8",english_14_algebra_1_elementary_algebra:"algebra-1-age-14-grade-9",english_15_algebra_2_intermediate_algebra:"algebra-2-age-15-grade-10",english_16_algebra_with_trigonometry:"algebra-with-trigonometry-age-16-grade-11",english_16_introductory_physics_algebra_based:"introductory-physics-algebra-based-age-16-grade-11",english_17_college_algebra_non_stem_track:"college-algebra-non-stem-age-17-grade-12",english_17_introductory_statistics:"introductory-statistics-age-17-grade-12",english_17_precalculus:"precalculus-age-17-grade-12",english_18_anatomy_and_physiology:"anatomy-and-physiology-age-18-bachelors-1",english_18_anthropology:"anthropology-age-18-bachelors-1",english_18_astronomy:"astronomy-age-18-bachelors-1",english_18_biology_for_non_science_majors:"biology-non-science-majors-age-18-bachelors-1",english_18_biology_for_science_majors:"biology-science-majors-age-18-bachelors-1",english_18_biosystems_engineering:"biosystems-engineering-age-18-bachelors-1",english_18_business_law_essentials:"business-law-essentials-age-18-bachelors-1",english_18_calculus_vol_1:"calculus-volume-1-age-18-bachelors-1",english_18_calculus_vol_2:"calculus-volume-2-age-18-bachelors-1",english_18_calculus_vol_3:"calculus-volume-3-age-18-bachelors-1",english_18_chemistry:"chemistry-age-18-bachelors-1",english_18_foundations_of_computation:"foundations-of-computation-age-18-bachelors-1",english_18_introduction_to_business:"introduction-to-business-age-18-bachelors-1",english_18_introductory_business_statistics:"introductory-business-statistics-age-18-bachelors-1",english_18_macroeconomics:"macroeconomics-age-18-bachelors-1",english_18_mathematics_for_liberal_arts_majors:"mathematics-for-liberal-arts-age-18-bachelors-1",english_18_microeconomics:"microeconomics-age-18-bachelors-1",english_18_nutrition_for_nurses:"nutrition-for-nurses-age-18-bachelors-1",english_18_philosophy:"philosophy-age-18-bachelors-1",english_18_physics_algebra_based:"physics-algebra-based-age-18-bachelors-1",english_18_physics_calculus_based_vol_1:"physics-calculus-based-volume-1-age-18-bachelors-1",english_18_physics_calculus_based_vol_2:"physics-calculus-based-volume-2-age-18-bachelors-1",english_18_physics_calculus_based_vol_3:"physics-calculus-based-volume-3-age-18-bachelors-1",english_18_political_science:"political-science-age-18-bachelors-1",english_18_principles_of_accounting_vol_1_financial_accounting:"principles-of-accounting-vol-1-financial-accounting-age-18-bachelors-1",english_18_principles_of_accounting_vol_2_managerial_accounting:"principles-of-accounting-vol-2-managerial-accounting-age-18-bachelors-1",english_18_principles_of_management:"principles-of-management-age-18-bachelors-1",english_18_psychology:"psychology-age-18-bachelors-1",english_18_python_programming:"python-programming-age-18-bachelors-1",english_18_sociology:"sociology-age-18-bachelors-1",english_18_statistics:"statistics-age-18-bachelors-1",english_18_workplace_software_and_skills:"workplace-software-and-skills-age-18-bachelors-1",english_18_world_history_volume_1_to_1500:"world-history-volume-1-to-1500-age-18-bachelors-1",english_18_world_history_volume_2_from_1400:"world-history-volume-2-from-1400-age-18-bachelors-1",english_18_writing_guide_with_handbook:"writing-guide-with-handbook-age-18-bachelors-1",english_19_clinical_nursing_skills:"clinical-nursing-skills-age-19-bachelors-2",english_19_discrete_structures:"discrete-structures-age-19-bachelors-2",english_19_entrepreneurship:"entrepreneurship-age-19-bachelors-2",english_19_introductory_business_ethics:"introductory-business-ethics-age-19-bachelors-2",english_19_linear_algebra:"linear-algebra-age-19-bachelors-2",english_19_microbiology_for_non_majors:"microbiology-for-non-majors-age-19-bachelors-2",english_19_organic_chemistry:"organic-chemistry-age-19-bachelors-2",english_19_organizational_behavior:"organizational-behavior-age-19-bachelors-2",english_19_pharmacology_for_nurses:"pharmacology-for-nurses-age-19-bachelors-2",english_19_principles_of_finance:"principles-of-finance-age-19-bachelors-2",english_19_principles_of_marketing:"principles-of-marketing-age-19-bachelors-2",english_20_abstract_algebra:"abstract-algebra-age-20-bachelors-3",english_20_differential_equations:"differential-equations-age-20-bachelors-3",english_20_electromagnetics_volume_1:"electromagnetics-volume-1-age-20-bachelors-3",english_20_electromagnetics_volume_2:"electromagnetics-volume-2-age-20-bachelors-3",english_20_introduction_to_intellectual_property:"introduction-to-intellectual-property-age-20-bachelors-3",english_20_linear_time_invariant_dynamic_systems:"linear-time-invariant-dynamic-systems-age-20-bachelors-3",english_20_maternal_newborn_nursing:"maternal-newborn-nursing-age-20-bachelors-3",english_20_population_health_for_nurses:"population-health-for-nurses-age-20-bachelors-3",english_20_psychiatric_mental_health_nursing:"psychiatric-mental-health-nursing-age-20-bachelors-3",english_21_complex_analysis:"complex-analysis-age-21-bachelors-4",english_21_optics:"optics-age-21-bachelors-4",english_21_real_analysis_volume_1:"real-analysis-volume-1-age-21-bachelors-4",english_21_real_analysis_advanced_calculus_volume_1:"real-analysis-volume-1-age-21-bachelors-4",english_21_real_analysis_volume_2:"real-analysis-volume-2-age-21-bachelors-4",english_21_real_analysis_advanced_calculus_volume_2:"real-analysis-volume-2-age-21-bachelors-4",english_22_coastal_dynamics:"coastal-dynamics-age-22-masters-1",english_22_structured_electronics_design:"structured-electronics-design-age-22-masters-1",english_22_traffic_flow_theory:"traffic-flow-theory-age-22-masters-1",english_23_quantum_electrical_circuits:"quantum-electrical-circuits-age-23-masters-2",english_5_science:"science-age-5-kindergarten",english_6_science:"science-age-6-grade-1",english_7_science:"science-age-7-grade-2",english_8_science:"science-age-8-grade-3",english_9_science:"science-age-9-grade-4"},LANGUAGE_PREFIX_TO_CODE={english:"en",arabic:"ar",spanish:"es",chinese:"zh",polish:"pl"},PAGE_LANGUAGE_VARIANTS={about:["en","es","ar","zh","pl"],"abstract-algebra-age-20-bachelors-3":["en","es","ar","zh"],"biology-science-majors-age-18-bachelors-1":["en","ar","zh"],"calculus-volume-1-age-18-bachelors-1":["en","es","ar","zh"],"calculus-volume-2-age-18-bachelors-1":["en","es"],"calculus-volume-3-age-18-bachelors-1":["en","es"],"chemistry-age-18-bachelors-1":["en","es"],index:["en","es","ar","zh","pl"],"macroeconomics-age-18-bachelors-1":["en","ar","pl"],"microeconomics-age-18-bachelors-1":["en","pl"],"physics-calculus-based-volume-1-age-18-bachelors-1":["en","es","pl"],"physics-calculus-based-volume-2-age-18-bachelors-1":["en","es","pl"],"physics-calculus-based-volume-3-age-18-bachelors-1":["en","es","pl"],"precalculus-age-17-grade-12":["en","es"],privacy:["en","es","ar","zh","pl"],"psychology-age-18-bachelors-1":["en","pl"],search:["en","es","ar","zh","pl"],"statistics-age-18-bachelors-1":["en","es"],terms:["en","es","ar","zh","pl"],updates:["en","es","ar","zh","pl"]},LANGUAGE_DISPLAY_ORDER=["en","es","ar","zh","pl"],LANGUAGE_LABEL_FALLBACK={en:"English",es:"Español",ar:"العربية",zh:"中文",pl:"Polski"},FORM_TEXT={en:{selectOption:"Select Option",selectLanguage:"Select Language",selectAge:"Select Age",selectSubject:"Select Subject",catalogUnavailable:"Catalog unavailable",downloadUnavailable:"Download unavailable",downloadFailed:"Sorry, the download failed. Please try again."},es:{selectOption:"Selecciona una opción",selectLanguage:"Selecciona un idioma",selectAge:"Selecciona una edad",selectSubject:"Selecciona una asignatura",catalogUnavailable:"Catálogo no disponible",downloadUnavailable:"Descarga no disponible",downloadFailed:"Lo sentimos, la descarga falló. Inténtalo de nuevo."},ar:{selectOption:"اختر خيارًا",selectLanguage:"اختر لغة",selectAge:"اختر عمرًا",selectSubject:"اختر مادة",catalogUnavailable:"الفهرس غير متاح",downloadUnavailable:"التنزيل غير متاح",downloadFailed:"عذرًا، فشل التنزيل. يرجى المحاولة مرة أخرى."},zh:{selectOption:"选择选项",selectLanguage:"选择语言",selectAge:"选择年龄",selectSubject:"选择学科",catalogUnavailable:"目录不可用",downloadUnavailable:"无法下载",downloadFailed:"抱歉，下载失败。请重试。"},pl:{selectOption:"Wybierz opcję",selectLanguage:"Wybierz język",selectAge:"Wybierz wiek",selectSubject:"Wybierz przedmiot",catalogUnavailable:"Katalog niedostępny",downloadUnavailable:"Pobieranie niedostępne",downloadFailed:"Przepraszamy, pobieranie nie powiodło się. Spróbuj ponownie."}},DOWNLOAD_API_ENDPOINT="https://uoti-vercel-api.vercel.app/api/download?file=";function onDomReady(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function normalizeLanguageCode(e){if(!e)return"";return String(e).toLowerCase().split(/[-_]/)[0]}const DOCUMENT_LANGUAGE=document.documentElement.lang||"en",CURRENT_LANGUAGE=normalizeLanguageCode(DOCUMENT_LANGUAGE)||"en";function getFormText(e){return(FORM_TEXT[CURRENT_LANGUAGE]||FORM_TEXT.en)[e]||FORM_TEXT.en[e]||""}function getLocalizedPath(e,a){if(!e)return"";const t=normalizeLanguageCode(a)||"en",n=String(e).replace(/^\/+/,"");return"en"===t?"index"===n?"/":`/${n}.html`:"index"===n?`/${t}/`:`/${t}/${n}.html`}function getCurrentPageInfo(){const e=(window.location&&window.location.pathname?window.location.pathname:"").split("/").filter(Boolean),a=new Set(LANGUAGE_DISPLAY_ORDER.filter(e=>"en"!==e));let t="en",n=e.length?e[e.length-1]:"index.html";if(n&&!n.endsWith("/")||(n="index.html"),n.includes(".")||(n=`${n}.html`),e.length){const l=e[0],o=normalizeLanguageCode(l);o&&a.has(o)&&normalizeLanguageCode(l)===o&&l.length===o.length&&(t=o,1===e.length?n="index.html":(n=e[e.length-1]||"index.html",n.includes(".")||(n=`${n}.html`)))}return{baseSlug:n.replace(/\.html$/i,""),lang:t,fileName:n}}function sortLanguages(e){return Array.isArray(e)?e.map(normalizeLanguageCode).filter(Boolean).sort((e,a)=>{const t=LANGUAGE_DISPLAY_ORDER.indexOf(e),n=LANGUAGE_DISPLAY_ORDER.indexOf(a),l=-1===t?Number.MAX_SAFE_INTEGER:t,o=-1===n?Number.MAX_SAFE_INTEGER:n;return l!==o?l-o:e.localeCompare(a)}):[]}function getLanguageLabel(e,a){const t=normalizeLanguageCode(e);if(a)for(const e of a){const a=Array.from(e.options||[]).find(e=>normalizeLanguageCode(e.dataset.lang)===t);if(a)return(a.textContent||"").trim()}return LANGUAGE_LABEL_FALLBACK[t]||e}function initLanguageAvailabilityNotice(e,a,t){if(!document.body||!document.body.classList.contains("textbook-detail-page"))return;const n=sortLanguages(a).filter(a=>a!==e.lang);if(!n.length)return;const l=document.querySelector(".book-container")||document.querySelector("main");if(!l||l.querySelector(".language-availability"))return;const o=document.createElement("section");o.className="language-availability";const i=document.createElement("h2");i.className="language-availability__title",i.textContent="Also available in",o.appendChild(i);const s=document.createElement("ul");s.className="language-availability__list",n.forEach(a=>{const n=document.createElement("li"),l=document.createElement("a");l.href=getLocalizedPath(e.baseSlug,a),l.textContent=getLanguageLabel(a,t),n.appendChild(l),s.appendChild(n)}),o.appendChild(s),l.appendChild(o)}function buildConfigMap(e){const a={};return e.forEach(({language:e,age:t,subject:n,pdf:l})=>{a[e]||(a[e]={ages:{}});const o=a[e].ages;o[t]||(o[t]={subjects:{}}),o[t].subjects[n]=l}),{languages:a}}async function loadCatalogConfig(){return catalogLoadPromise||(catalogLoadPromise=(async()=>{try{const e=await fetch("/data/catalog.json",{cache:"no-store"});if(!e.ok)throw new Error(`Failed to load catalog: ${e.status}`);const a=await e.json(),t=buildConfigMap(Array.isArray(a)?a:[]);return CONFIG.languages=t.languages,catalogReady=!0,CONFIG}catch(e){throw console.error("Catalog data failed to load",e),catalogReady=!1,catalogLoadPromise=null,e}})(),catalogLoadPromise)}function getDownloadLinkElement(){return document.getElementById("download-link")}function disableDownloadLink(e=getDownloadLinkElement()){e&&(e.classList.add("disabled"),e.classList.remove("download-link-active"),e.setAttribute("aria-disabled","true"),e.setAttribute("tabindex","-1"),e.href="#")}function enableDownloadLink(e,a=getDownloadLinkElement()){a&&(a.classList.remove("disabled"),a.classList.add("download-link-active"),a.removeAttribute("aria-disabled"),a.removeAttribute("tabindex"),a.href=e)}async function fetchSignedDownloadUrl(e){const a=await fetch(`${DOWNLOAD_API_ENDPOINT}${encodeURIComponent(e)}`);if(!a.ok)throw new Error(`Failed to fetch signed URL: ${a.status}`);const t=await a.json();if(!t||!t.url)throw new Error("Response missing URL");return t.url}function getDetailSlugFromPdf(e){if(!e||"string"!=typeof e)return null;if(e.startsWith("http"))return null;const a=e.split("/");if(a.length<2)return null;const t=a[1];if(!t)return null;const n=DETAIL_PAGE_MAP[t];if(n)return getLocalizedPath(n,"en");const l=t.split("_");if(l.length<2)return null;const o=l[0],i=["english",...l.slice(1)].join("_"),s=DETAIL_PAGE_MAP[i];if(!s)return null;const r=LANGUAGE_PREFIX_TO_CODE[o];return r?getLocalizedPath(s,r):null}function prepareTextbookDetailDownloads(){const e=document.querySelectorAll(".textbook-download");e.length&&e.forEach(e=>{prepareTextbookDownloadLink(e)})}async function prepareTextbookDownloadLink(e){const a=e.getAttribute("data-download-state");if("loading"===a||"ready"===a)return;const t=e.getAttribute("data-pdf")||e.getAttribute("href");if(t&&"#"!==t&&!t.startsWith("http")){e.setAttribute("data-pdf",t),e.setAttribute("data-download-state","loading"),e.classList.add("textbook-download--loading"),e.setAttribute("aria-disabled","true"),e.setAttribute("tabindex","-1"),e.hasAttribute("data-original-content")||e.setAttribute("data-original-content",e.innerHTML),e.hasAttribute("target")&&!e.hasAttribute("data-original-target")&&e.setAttribute("data-original-target",e.getAttribute("target")),e.href="#";try{const a=await fetchSignedDownloadUrl(t);e.href=a,e.classList.remove("textbook-download--loading"),e.removeAttribute("aria-disabled"),e.removeAttribute("tabindex");const n=e.getAttribute("data-original-content");n&&(e.innerHTML=n);const l=e.getAttribute("data-original-target");l&&e.setAttribute("target",l),e.setAttribute("data-download-state","ready")}catch(a){console.error("Signed download link failed to load",a),e.classList.remove("textbook-download--loading"),e.classList.add("textbook-download--error"),e.textContent=getFormText("downloadUnavailable"),e.setAttribute("data-download-state","error"),e.removeAttribute("tabindex"),e.removeAttribute("aria-disabled"),e.removeAttribute("target"),e.href="#"}}}function populateSelect(e,a,t=getFormText("selectOption")){const n=document.getElementById(e);if(!n)return;const l=a?Object.keys(a):[];n.innerHTML=`<option value="">${t}</option>`,l.forEach(e=>{const a=document.createElement("option");a.value=e,a.textContent=e,n.appendChild(a)}),n.disabled=0===l.length,updateSelectTitle(n)}function updateSelectTitle(e){if(!e)return;const a=e.options[e.selectedIndex];e.title=a?a.textContent:""}function showLearnerAge(){const e=document.getElementById("language").value;if(updateSelectTitle(document.getElementById("language")),!catalogReady||!e||!CONFIG.languages[e])return void resetSelections("language");populateSelect("learner-age",CONFIG.languages[e].ages,getFormText("selectAge")),resetSelections("learner-age")}function showSubject(){const e=document.getElementById("language").value,a=document.getElementById("learner-age").value;if(updateSelectTitle(document.getElementById("learner-age")),!catalogReady||!e||!a)return void resetSelections("learner-age");const t=CONFIG.languages[e],n=t&&t.ages?t.ages[a]:null;populateSelect("subject",n?n.subjects:{},getFormText("selectSubject")),resetSelections("subject")}async function showDownload(){const e=document.getElementById("language").value,a=document.getElementById("learner-age").value,t=document.getElementById("subject").value;if(updateSelectTitle(document.getElementById("subject")),!catalogReady||!(e&&a&&t))return void disableDownloadLink();const n=CONFIG.languages[e],l=n&&n.ages?n.ages[a]:null,o=l&&l.subjects?l.subjects[t]:null;if(!o)return void disableDownloadLink();disableDownloadLink();const i=getDetailSlugFromPdf(o);if(i)enableDownloadLink(i);else try{enableDownloadLink(await fetchSignedDownloadUrl(o))}catch(e){console.error("Failed to fetch signed URL",e),disableDownloadLink(),alert(getFormText("downloadFailed"))}}function resetSelections(e){if("language"===e){const e=document.getElementById("learner-age");e&&(e.innerHTML=`<option value="">${getFormText("selectAge")}</option>`,e.disabled=!0,updateSelectTitle(e))}if("language"===e||"learner-age"===e){const e=document.getElementById("subject");e&&(e.innerHTML=`<option value="">${getFormText("selectSubject")}</option>`,e.disabled=!0,updateSelectTitle(e))}disableDownloadLink()}async function initForm(){const e=document.getElementById("language"),a=document.getElementById("learner-age"),t=document.getElementById("subject");if(disableDownloadLink(),e&&a&&t){e.addEventListener("change",showLearnerAge),a.addEventListener("change",showSubject),t.addEventListener("change",showDownload);try{await loadCatalogConfig(),populateSelect("language",CONFIG.languages,getFormText("selectLanguage"))}catch(a){e.innerHTML=`<option value="">${getFormText("catalogUnavailable")}</option>`,e.disabled=!0,resetSelections("language")}}}function initSiteLanguageSelectors(){const e=(document.documentElement.lang||"").toLowerCase(),a=normalizeLanguageCode(e),t=document.querySelectorAll("[data-language-switcher]");if(!t.length)return;const n=getCurrentPageInfo(),l=PAGE_LANGUAGE_VARIANTS[n.baseSlug],o=l?new Set(l.map(normalizeLanguageCode)):null;t.forEach(t=>{const l=Array.from(t.options||[]);l.forEach(e=>{const a=normalizeLanguageCode(e.dataset.lang),t=a?getLocalizedPath("index",a):"";if(e.hasAttribute("data-default-href")||e.setAttribute("data-default-href",e.value||t||""),o&&a&&o.has(a))e.value=getLocalizedPath(n.baseSlug,a);else if(t)e.value=t;else{const a=e.getAttribute("data-default-href");a&&(e.value=a)}});const i=l.find(e=>normalizeLanguageCode(e.dataset.lang)===n.lang)||l.find(e=>normalizeLanguageCode(e.dataset.lang)===a)||l.find(a=>(a.dataset.lang||"").toLowerCase()===e);i&&(t.value=i.value),t.addEventListener("change",e=>{const a=e.currentTarget;if(!a)return;const t=a.selectedOptions&&a.selectedOptions[0],n=t?t.value:"";n&&(window.location.href=n)})}),o&&initLanguageAvailabilityNotice(n,Array.from(o),t)}function initNavMenu(){const e=document.querySelector(".hamburger-menu"),a=document.querySelector(".nav-menu");if(!e||!a)return;const t=()=>{e.classList.remove("active"),a.classList.remove("active")};e.addEventListener("click",()=>{e.classList.toggle("active"),a.classList.toggle("active")}),document.querySelectorAll(".nav-menu a").forEach(e=>{e.addEventListener("click",t)}),document.addEventListener("click",n=>{const l=a.contains(n.target),o=e.contains(n.target);l||o||!a.classList.contains("active")||t()});const n=()=>document.documentElement.scrollHeight>document.documentElement.clientHeight;if(window.addEventListener("scroll",()=>{a.classList.contains("active")&&n()&&t()},{passive:!0}),"function"==typeof ResizeObserver&&document.body){new ResizeObserver(()=>{a.classList.contains("active")&&!n()?a.classList.add("no-scroll"):a.classList.remove("no-scroll")}).observe(document.body)}}function stripHTML(e){const a=document.createElement("div");return a.innerHTML=e,a.textContent||a.innerText||""}function highlightMatch(e,a){if(!a)return e;const t=document.createElement("div");t.innerHTML=e;const n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1),l=new RegExp(`(${a})`,"gi");for(;n.nextNode();){const e=n.currentNode;if(e.nodeValue.toLowerCase().includes(a.toLowerCase())){const a=document.createElement("span");a.innerHTML=e.nodeValue.replace(l,"<mark>$1</mark>"),e.parentNode.replaceChild(a,e)}}return t.innerHTML}function filterAndHighlight(){const e=document.getElementById("catalog-search").value.toLowerCase().trim(),a=document.querySelectorAll(".catalog-card"),t=document.getElementById("no-match");let n=!1;a.forEach(a=>{a.hasAttribute("data-original")||a.setAttribute("data-original",a.innerHTML);const t=a.getAttribute("data-original"),l=stripHTML(t).toLowerCase(),o=a.dataset.tags.split(","),i=Array.from(selectedTags).every(e=>o.includes(e.toLowerCase())),s=(""===e||l.includes(e))&&i;s?(a.style.display="",a.innerHTML=highlightMatch(t,e)):a.style.display="none",n=n||s}),t.style.display=n?"none":"block"}const selectedTags=new Set;function initCatalogTagFilters(){const e=document.querySelectorAll(".tag");e.length&&e.forEach(e=>{e.addEventListener("click",()=>{const a=e.dataset.filter;a&&(selectedTags.has(a)?(selectedTags.delete(a),e.classList.remove("active")):(selectedTags.add(a),e.classList.add("active")),filterAndHighlight())})})}function initFaqAccordion(){const e=document.querySelectorAll(".faq-question.collapsible");e.length&&e.forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("active");const a=e.nextElementSibling;a&&("block"===a.style.display?a.style.display="none":a.style.display="block")})})}function initAnimatedCounters(){const e=document.querySelectorAll(".counter");e.length&&e.forEach(e=>{const a=()=>{const t=Number(e.getAttribute("data-target")),n=Number(e.innerText),l=Math.ceil(t/200);n<t?(e.innerText=Math.min(n+l,t),setTimeout(a,10)):e.innerText=t};a()})}function injectBreadcrumbSchema(){const e=document.querySelector("nav.breadcrumb");if(!e)return;const a=Array.from(e.querySelectorAll('a, span[aria-current="page"]'));if(!a.length)return;const t=a.reduce((e,a,t)=>{const n=a.textContent.trim();if(!n)return e;const l="a"===a.tagName.toLowerCase(),o=l?a.getAttribute("href"):"",i=l?new URL(o,window.location.href).href:window.location.href;return e.push({"@type":"ListItem",position:t+1,name:n,item:i}),e},[]);if(!t.length)return;const n={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:t},l=document.createElement("script");l.type="application/ld+json",l.text=JSON.stringify(n),document.head.appendChild(l)}onDomReady(()=>{initForm(),prepareTextbookDetailDownloads(),initSiteLanguageSelectors(),initNavMenu(),initCatalogTagFilters(),initFaqAccordion(),initAnimatedCounters(),injectBreadcrumbSchema()});